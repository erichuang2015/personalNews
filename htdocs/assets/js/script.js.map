{"version":3,"sources":["script.js"],"names":["document","addEventListener","addClass","element","className","classList","add","removeClass","remove","scrollToTarget","x","y","window","scrollTo","setJs","body","getElementsByTagName","handleOverlayTriggers","elementClassName","elements","getElementsByClassName","i","length","onclick","event","target","this","getAttribute","toggleOverlay","elementId","targetElement","getElementById","contains","effectClassApplyTo","fixElement","preventDefault","stickyElement","stickyId","compensateId","compensateProperty","stickyHeight","clientHeight","style","setProperty","placeOverlay","overlayElement","top","themeSwitch","renderFile","applyThemeClassTo","switchingElement","xmlhttp","XMLHttpRequest","checked","themeDark","themeLight","open","send","localStorage","setItem","console","log","channelSwitch","elementContainer","switchChannel","e","currentTarget","channelLink","ajaxRequest","stopPropagation","savedLocalStorageChannel","getItem","elementToToggleOnLoad","overlayContainer","onreadystatechange","readyState","outputContainer","innerHTML","response","elementToFix","scrollY","pageYOffset","scrollYMem","savedLocalStorageTheme"],"mappings":"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","file":"script.js","sourcesContent":["// is the DOM ready for manipulation?\ndocument.addEventListener('DOMContentLoaded', function() {\n\n\t\t// ---- variables ----\n\t\tvar themeLight = 'light';\n\t\tvar themeDark = 'dark';\n\t\tvar elementToToggleOnLoad = 'application-loading';\n\t\tvar effectClassApplyTo = document.getElementsByTagName('body')[0];\n\n\t\t// helper: change classes\n\t\tfunction addClass(element,className) {\n\t\t\telement.classList.add(className);\n\t\t}\n\t\tfunction removeClass(element,className) {\n\t\t\telement.classList.remove(className);\n\t\t}\n\n\t\t// helper: scroll to desired position\n\t\tfunction scrollToTarget(x,y) {\n\t\t\twindow.scrollTo(x,y);\n\t\t}\n\n\t\t// add JS to body-tag to allow CSS-Manipulation if JS is available\n\t\tfunction setJs() {\n\t\t\tvar body = document.getElementsByTagName(\"body\")[0];\n\t\t\taddClass(body,'js');\n\t\t}\n\n\t\t// ---- global functions ----\n\n\t\t// Overlay-Handling\n\t\tfunction handleOverlayTriggers(elementClassName) {\n\t\t\tvar elements = document.getElementsByClassName(elementClassName);\n\t\t\tfor(i=0; i < elements.length; i++) {\n\t\t\t\telements[i].onclick = function(event) {\n\t\t\t\t\tvar target = this.getAttribute('data-target');\n\t\t\t\t\ttoggleOverlay(target,event);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfunction toggleOverlay(elementId,event) {\n\t\t\tvar targetElement = document.getElementById(elementId);\n\t\t\tif(targetElement.classList.contains('js-visible')) {\n\t\t\t\taddClass(targetElement,'js-hidden');\n\t\t\t\tremoveClass(targetElement,'js-visible');\n\t\t\t\tremoveClass(effectClassApplyTo,'js-fx');\n\t\t\t} else {\n\t\t\t\tremoveClass(targetElement,'js-hidden');\n\t\t\t\taddClass(targetElement,'js-visible');\n\t\t\t\taddClass(effectClassApplyTo,'js-fx');\n\t\t\t}\n\t\t\tfixElement(\"content\");\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\t// make element sticky (via position in css)\n\t\tfunction stickyElement(stickyId,compensateId,compensateProperty) {\n\t\t\tstickyElement = document.getElementById(stickyId);\n\t\t\tstickyElement.classList.add('sticky');\n\t\t\tstickyHeight = stickyElement.clientHeight + 'px';\n\n\t\t\t//add Element-Height as defined property to desired element\n\t\t\tdocument.getElementById(compensateId).style.setProperty(compensateProperty,stickyHeight);\n\t\t}\n\n\t\t// place Element in relation to sticky element\n\t\tfunction placeOverlay(elementId) {\n\t\t\toverlayElement = document.getElementById(elementId);\n\t\t\toverlayElement.style.top = stickyHeight;\n\t\t}\n\n\t\t// ---- theme-switching ----\n\t\t// check if localStorage is filled and set body.class with it. This is useful, if the site runs as app\n\t\tvar savedLocalStorageTheme = localStorage.getItem('theme');\n\t\tvar applyThemeClassTo = document.getElementsByTagName('html')[0];\n\t\tconsole.log(savedLocalStorageTheme);\n\t\tif(savedLocalStorageTheme !== null) {\n\t\t\tremoveClass(applyThemeClassTo, themeLight);\n\t\t\tremoveClass(applyThemeClassTo, themeDark);\n\t\t\taddClass(applyThemeClassTo,savedLocalStorageTheme);\n\t\t\tif(savedLocalStorageTheme === themeLight) {\n\t\t\t\tdocument.getElementById('theme-switcher').checked = false;\n\t\t\t}\n\t\t\tif(savedLocalStorageTheme === themeDark) {\n\t\t\t\tdocument.getElementById('theme-switcher').checked = true;\n\t\t\t}\n\t\t}\n\n\t\t// switch theme by adding and removing classes to body\n\t\tfunction themeSwitch(elementId) {\n\t\t\tvar renderFile = 'themeswitch.php?theme=';\n\t\t\tvar applyThemeClassTo = document.getElementsByTagName('html')[0];\n\n\t\t\tswitchingElement = document.getElementById(elementId);\n\t\t\tswitchingElement.onclick = function() {\n\t\t\t\txmlhttp = new XMLHttpRequest();\n\t\t\t\tif (this.checked) {\n\t\t\t\t\taddClass(applyThemeClassTo, themeDark);\n\t\t\t\t\tremoveClass(applyThemeClassTo, themeLight);\n\t\t\t\t\txmlhttp.open('GET',renderFile+themeDark,true);\n\t\t\t\t\txmlhttp.send();\n\t\t\t\t\tlocalStorage.setItem('theme', themeDark);\n\t\t\t\t\tconsole.log('localStorage Theme is: ' + themeDark);\n\t\t\t\t} else {\n\t\t\t\t\taddClass(applyThemeClassTo, themeLight);\n\t\t\t\t\tremoveClass(applyThemeClassTo, themeDark);\n\t\t\t\t\txmlhttp.open('GET','themeswitch.php?theme='+themeLight,true);\n\t\t\t\t\txmlhttp.send();\n\t\t\t\t\tlocalStorage.setItem('theme', themeLight);\n\t\t\t\t\tconsole.log('localStorage Theme is: ' + themeLight);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// ---- Loading Feeds (via Ajax) ----\n\t\t// add listener\n\t\tfunction channelSwitch(elementId) {\n\t\t\telementContainer = document.getElementById(elementId);\n\t\t\telementContainer.addEventListener('click', switchChannel, false);\n\t\t}\n\n\t\t// prepare loading after click\n\t\tfunction switchChannel(e) {\n\t\t\tif (e.target !== e.currentTarget) {\n\t\t\t\tchannelLink = e.target.getAttribute('href');\n\t\t\t\tremoveClass(effectClassApplyTo,'js-fx');\n\t\t\t\tajaxRequest(channelLink);\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t// loading the content\n\t\tfunction ajaxRequest(channelLink) {\n\t\t\t// if this function is called with no parameter, we're chencking the localStorag, if one is present and use this (useful for initial load)\n\t\t\tif(channelLink === '') {\n\t\t\t\tvar savedLocalStorageChannel = localStorage.getItem('channel');\n\t\t\t\tif(savedLocalStorageChannel !== null) {\n\t\t\t\t\tvar channelLink = savedLocalStorageChannel;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// requesting the content\n\t\t\tdocument.getElementById(elementToToggleOnLoad).classList.remove('js-hidden');\n\t\t\trenderFile = 'render-feeds.php';\n\t\t\txmlhttp = new XMLHttpRequest();\n\t\t\txmlhttp.open('GET',renderFile+channelLink,true);\n\t\t\txmlhttp.send();\n\n\t\t\toverlayContainer = document.getElementById('application-overlay');\n\t\t\taddClass(overlayContainer,'js-hidden');\n\n\n\t\t\t// output if call is succesful\n\t\t\txmlhttp.onreadystatechange = function() {\n\t\t\t\tif (xmlhttp.readyState === 4 && xmlhttp.readyState) {\n\t\t\t\t\toutputContainer = document.getElementById('content');\n\t\t\t\t\toutputContainer.innerHTML = xmlhttp.response;\n\t\t\t\t\tdocument.getElementById(elementToToggleOnLoad).classList.add('js-hidden');\n\t\t\t\t\tdocument.getElementById('content').classList.remove('fixed');\n\t\t\t\t\tdocument.getElementById('application-overlay').classList.remove('js-visible');\n\t\t\t\t\tscrollToTarget(0,0);\n\t\t\t\t\tlocalStorage.setItem('channel', channelLink);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// ---- fix element to current position\n\t\tfunction fixElement(elementId) {\n\t\t\telementToFix = document.getElementById(elementId);\n\t\t\tscrollY = window.pageYOffset;\n\n\t\t\tif(elementToFix.classList.contains('js-fixed')) {\n\t\t\t\tremoveClass(elementToFix,'js-fixed');\n\t\t\t\telementToFix.style.top = '';\n\t\t\t\tscrollToTarget(0,scrollYMem);\n\t\t\t} else {\n\t\t\t\taddClass(elementToFix,'js-fixed');\n\t\t\t\telementToFix.style.top = '-' + scrollY + 'px';\n\t\t\t\tscrollYMem = scrollY;\n\t\t\t}\n\t\t\tconsole.log(scrollYMem);\n\t\t}\n\n\t\t// ---- initialize ----\n\t\t// set Js on body if JS is available\n\t\tsetJs();\n\n\t\t// initial load of content\n\t\tajaxRequest('');\n\n\t\t//sticky header (item(id) to fix, item(id) with property to compensate fix)\n\t\tstickyElement('application-header','content','margin-top');\n\n\t\t// theme switcher\n\t\tthemeSwitch('theme-switcher');\n\n\t\t// Overlays\n\t\thandleOverlayTriggers('js-overlay-toggle');\n\n\t\t// place overlay\n\t\tplaceOverlay('application-overlay');\n\n\t\t// switch channels\n\t\tchannelSwitch('channels');\n\t});\n"]}